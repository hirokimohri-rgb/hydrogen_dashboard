<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>水素投資トレンド分析 2021-2025</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.umd.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: 'Noto Sans JP', sans-serif; background: #f8fafc; color: #1e293b; line-height: 1.6; }
    .container { max-width: 1400px; margin: 0 auto; padding: 32px 24px; }
    header { display: flex; align-items: center; gap: 16px; margin-bottom: 32px; padding-bottom: 24px; border-bottom: 1px solid #e2e8f0; }
    .logo { width: 56px; height: 56px; background: linear-gradient(135deg, #0ea5e9 0%, #6366f1 100%); border-radius: 14px; display: flex; align-items: center; justify-content: center; font-size: 28px; box-shadow: 0 4px 12px rgba(14, 165, 233, 0.3); }
    header h1 { font-size: 26px; font-weight: 700; color: #0f172a; }
    .tabs { display: flex; gap: 8px; margin-bottom: 28px; flex-wrap: wrap; }
    .tab { padding: 10px 24px; border: 1px solid #e2e8f0; background: #fff; color: #64748b; font-size: 14px; font-weight: 500; border-radius: 8px; cursor: pointer; transition: all 0.2s; }
    .tab.active { background: linear-gradient(135deg, #0ea5e9 0%, #6366f1 100%); color: #fff; border-color: transparent; }
    .tab-content { display: none; }
    .tab-content.active { display: block; }
    .stats-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; margin-bottom: 28px; }
    .stat-card { background: #fff; border-radius: 16px; padding: 24px; border: 1px solid #e2e8f0; }
    .stat-card .value { font-size: 32px; font-weight: 700; color: #0f172a; }
    .charts-grid { display: grid; grid-template-columns: 2fr 1fr; gap: 20px; margin-bottom: 28px; }
    .chart-card { background: #fff; border-radius: 16px; padding: 24px; border: 1px solid #e2e8f0; margin-bottom: 20px; }
    .chart-container { position: relative; height: 300px; }
    
    /* Table Styles */
    .search-box { margin-bottom: 16px; width: 100%; padding: 12px; border: 1px solid #e2e8f0; border-radius: 8px; font-size: 14px; }
    .table-wrapper { overflow-x: auto; background: #fff; border-radius: 12px; border: 1px solid #e2e8f0; }
    table { width: 100%; border-collapse: collapse; font-size: 13px; }
    th { background: #f8fafc; text-align: left; padding: 12px; border-bottom: 2px solid #e2e8f0; color: #64748b; font-weight: 600; }
    td { padding: 12px; border-bottom: 1px solid #f1f5f9; vertical-align: top; }
    .tag { display: inline-block; padding: 2px 8px; border-radius: 4px; background: #f1f5f9; font-size: 11px; margin-right: 4px; margin-bottom: 4px; }
    .amount-cell { font-weight: 600; color: #0ea5e9; }
    
    @media (max-width: 1024px) { .stats-grid { grid-template-columns: repeat(2, 1fr); } .charts-grid { grid-template-columns: 1fr; } }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="logo">⚡</div>
      <div>
        <h1>水素投資トレンド分析 2021-2025</h1>
        <p>スタートアップ投資データベース（294件）</p>
      </div>
    </header>
    
    <div class="tabs">
      <button class="tab active" data-tab="overview">概要</button>
      <button class="tab" data-tab="geography">地域分析</button>
      <button class="tab" data-tab="deals">ディール一覧</button>
      <button class="tab" data-tab="insights">インサイト</button>
    </div>

    <div id="overview" class="tab-content active">
      <div class="stats-grid">
        <div class="stat-card">
          <div style="font-size:12px;color:#64748b">総投資額</div>
          <div class="value">$6.7B</div>
          <div style="font-size:12px;color:#94a3b8">2021-2025年累計</div>
        </div>
        <div class="stat-card">
          <div style="font-size:12px;color:#64748b">総投資件数</div>
          <div class="value">294</div>
          <div style="font-size:12px;color:#94a3b8">掲載スタートアップ</div>
        </div>
        <div class="stat-card">
          <div style="font-size:12px;color:#64748b">平均投資額</div>
          <div class="value">$22.8M</div>
          <div style="font-size:12px;color:#94a3b8">金額判明分のみ</div>
        </div>
        <div class="stat-card">
          <div style="font-size:12px;color:#64748b">対象国数</div>
          <div class="value">30</div>
          <div style="font-size:12px;color:#94a3b8">世界各地の投資</div>
        </div>
      </div>
      <div class="charts-grid">
        <div class="chart-card">
          <h3>年別投資推移</h3>
          <div class="chart-container"><canvas id="yearlyChart"></canvas></div>
        </div>
        <div class="chart-card">
          <h3>セクター配分</h3>
          <div class="chart-container"><canvas id="sectorPieChart"></canvas></div>
        </div>
      </div>
    </div>

    <div id="geography" class="tab-content">
      <div class="chart-card">
        <h3>主要5カ国の投資額推移 (M$)</h3>
        <p style="font-size:12px;color:#94a3b8;margin-bottom:15px">地域ごとのトレンド推移を比較</p>
        <div class="chart-container" style="height:400px"><canvas id="regionalTrendChart"></canvas></div>
      </div>
      <div class="chart-card">
        <h3>国別累計投資額 (Top 8)</h3>
        <div class="chart-container"><canvas id="countryChart"></canvas></div>
      </div>
    </div>

    <div id="deals" class="tab-content">
      <div class="chart-card">
        <h3>個別ディール一覧</h3>
        <input type="text" id="dealSearch" class="search-box" placeholder="企業名、技術領域、概要を検索...">
        <div class="table-wrapper">
          <table id="dealTable">
            <thead>
              <tr>
                <th style="width:100px">時期</th>
                <th style="width:150px">企業名</th>
                <th style="width:120px">投資額</th>
                <th>技術領域</th>
                <th>事業概要</th>
              </tr>
            </thead>
            <tbody id="dealTableBody">
              </tbody>
          </table>
        </div>
      </div>
    </div>

    <div id="insights" class="tab-content">
        <div class="chart-card">
            <h3>データ分析からのインサイト</h3>
            <div style="margin-top:20px">
                <p><strong>1. 市場の選別期：</strong> 2022-23年をピークに全体額は減少。一方、1件あたりの質が重視されるフェーズへ。</p>
                <p><strong>2. 製造(Production)への集中：</strong> 全投資の約74%が水素製造技術（電解槽等）に集中しており、供給側のインフラ構築が優先されている。</p>
                <p><strong>3. 米国の圧倒的リード：</strong> 累計$3.1Bを超え、次点のドイツ（$0.9B）を大きく引き離す。政策(IRA等)の影響が顕著。</p>
            </div>
        </div>
    </div>

    <footer>
      *2025年データはQ4までの途中経過 | データソース: Hydrogen Investment Dataset
    </footer>
  </div>

  <script>
    // --- Data Management ---
    // データの読み込み（一部抜粋。実際はCSVから全件生成）
    const dealsData = [
      {date: '2025/Q4', company: 'SPARK Cleantech', amount: '$34.9M', sector: 'Production > Methane Pyrolysis', summary: '温室効果ガスを水素燃料に変えるプラズマ技術の開発'},
      {date: '2025/Q4', company: 'HYDGEN', amount: '$5.0M', sector: 'Production > Electrolysis > AEM', summary: 'シンガポール国立大学発、スケールアップ可能なAEM電解槽'},
      {date: '2025/Q4', company: 'RIFT', amount: '$3.5M', sector: 'Storage > Material Carriers', summary: '水素添加を必要としない鉄粉による水素エネルギー貯蔵'},
      {date: '2025/Q4', company: 'Neology', amount: '$2.1M', sector: 'Applications > Ammonia Cracking', summary: '燃料電池用アンモニアクラッキング装置の開発'},
      {date: '2024/Q3', company: 'Koloma', amount: '$245.7M', sector: 'Production > Natural Hydrogen', summary: '地下からの天然水素抽出技術、Bill Gates等が出資'},
      {date: '2023/Q1', company: 'Sunfire', amount: '$234.0M', sector: 'Production > SOEC Electrolysis', summary: 'ドイツを代表する高温固体酸化物電解槽メーカー'},
      {date: '2022/Q2', company: 'Electric Hydrogen', amount: '$198.0M', sector: 'Production > PEM Electrolysis', summary: '超大型PEM電解槽による化石燃料代替コストの実現'}
      // ... 全294件を想定したテーブル表示ロジックは下記
    ];

    // CSVの全データ（簡易的に上位を表示するロジックをJSで動かす）
    function loadTable(data) {
        const body = document.getElementById('dealTableBody');
        body.innerHTML = data.map(d => `
            <tr>
                <td>${d.date}</td>
                <td><strong>${d.company}</strong></td>
                <td class="amount-cell">${d.amount}</td>
                <td><span class="tag">${d.sector}</span></td>
                <td style="color:#475569">${d.summary}</td>
            </tr>
        `).join('');
    }
    loadTable(dealsData); // 初期表示

    // 検索機能
    document.getElementById('dealSearch').addEventListener('input', (e) => {
        const term = e.target.value.toLowerCase();
        const filtered = dealsData.filter(d => 
            d.company.toLowerCase().includes(term) || 
            d.sector.toLowerCase().includes(term) || 
            d.summary.toLowerCase().includes(term)
        );
        loadTable(filtered);
    });

    // --- Tab Logic ---
    document.querySelectorAll('.tab').forEach(tab => {
      tab.addEventListener('click', () => {
        document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
        document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
        tab.classList.add('active');
        document.getElementById(tab.dataset.tab).classList.add('active');
      });
    });

    // --- Charts ---
    // Yearly Chart
    new Chart(document.getElementById('yearlyChart'), {
      type: 'bar',
      data: {
        labels: ['2021', '2022', '2023', '2024', '2025*'],
        datasets: [{ label: '投資額 (M$)', data: [1023, 1848, 1849, 1408, 573], backgroundColor: '#0ea5e9', borderRadius: 6 }]
      },
      options: { responsive: true, maintainAspectRatio: false }
    });

    // Sector Pie
    new Chart(document.getElementById('sectorPieChart'), {
      type: 'doughnut',
      data: {
        labels: ['Production', 'Applications', 'Services', 'Distribution', 'Storage'],
        datasets: [{ data: [4954, 513, 415, 335, 245], backgroundColor: ['#0ea5e9', '#8b5cf6', '#f59e0b', '#10b981', '#ef4444'] }]
      },
      options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { position: 'bottom' } } }
    });

    // Regional Trend Chart (New!)
    new Chart(document.getElementById('regionalTrendChart'), {
      type: 'line',
      data: {
        labels: ['2021', '2022', '2023', '2024', '2025*'],
        datasets: [
          { label: '米国', data: [492, 937, 1142, 456, 114], borderColor: '#0ea5e9', tension: 0.3, fill: false },
          { label: 'ドイツ', data: [187, 369, 28, 234, 75], borderColor: '#6366f1', tension: 0.3, fill: false },
          { label: '中国', data: [141, 68, 346, 57, 23], borderColor: '#f59e0b', tension: 0.3, fill: false },
          { label: 'ベルギー', data: [0, 0, 6, 250, 135], borderColor: '#10b981', tension: 0.3, fill: false },
          { label: 'フランス', data: [58, 40, 43, 126, 67], borderColor: '#ef4444', tension: 0.3, fill: false }
        ]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: { legend: { position: 'top' } },
        scales: { y: { beginAtZero: true, title: { display: true, text: '投資額 (百万ドル)' } } }
      }
    });

    // Country Bar
    new Chart(document.getElementById('countryChart'), {
      type: 'bar',
      data: {
        labels: ['US', 'Germany', 'China', 'Belgium', 'France', 'UK', 'Estonia', 'Australia'],
        datasets: [{ label: '累計投資額 (M$)', data: [3143, 896, 637, 392, 335, 263, 170, 165], backgroundColor: '#6366f1' }]
      },
      options: { responsive: true, maintainAspectRatio: false }
    });
  </script>
</body>
</html>
